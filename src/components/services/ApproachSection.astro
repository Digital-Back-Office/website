---
interface Step {
  img: string;
  heading: string;
  text: string;
}

interface Props {
  heading: string;
  highlightPhrase: string | null;
  parts: string[] | null;
  steps: Step[];
}

const { heading, highlightPhrase, parts, steps } = Astro.props;

const arrows = [
  { id: "arrow1", viewBox: "0 0 339 365", style: "margin-left: -150px; margin-top: -140px; margin-bottom: -108px;" },
  { id: "arrow2", viewBox: "0 0 263 275", style: "margin-top: -60px; margin-left: -120px; margin-bottom: -80px;" },
];
---

<section class="overflow-hidden py-5 my-md-2 my-xl-4 my-xxl-5" data-bs-theme="dark">
  <div class="container py-2 py-sm-4 py-lg-5">
    <h2 class="h1 text-center pb-3 mb-4 mb-lg-5 mt-xxl-2">
      {
        parts ? (
          <>
            {parts[0]}
            <span style="color: #ffffff">{highlightPhrase}</span>
            {parts.slice(1).join(highlightPhrase || '')}
          </>
        ) : (
          heading
        )
      }
    </h2>

    {
      steps.map((step, idx) => (
        <>
          <div
            class={`row align-items-center position-relative pb-5 pb-lg-0 ${idx === steps.length - 1 ? "" : "mb-1 mb-sm-2 mb-md-4 mb-lg-0"}`}
          >
            <div
              class={`col-md-6 col-xl-5 ${idx % 2 === 0 ? "offset-lg-1 order-md-2" : "offset-xl-1"} pb-2 pb-md-0 mb-4 mb-md-0`}
              data-aos="fade-left"
              data-aos-duration="500"
              data-aos-offset="250"
              data-disable-parallax-down="md"
            >
              <img
                class="d-none d-dark-mode-block"
                src={step.img}
                width={idx === 0 ? "525" : "473"}
                alt="Image"
              />
            </div>
            <div
              class={`col-md-6 col-lg-5 col-xl-4 ${idx % 2 === 0 ? "order-md-1" : "offset-lg-1"}`}
              data-aos="fade-right"
              data-aos-duration="500"
              data-aos-offset="250"
              data-disable-parallax-down="md"
            >
              <div class={idx % 2 === 0 ? "pe-md-4 pe-lg-0" : "ps-md-4 ps-lg-0"}>
                <h3 class="h2 mb-3 mb-lg-4">{step.heading}</h3>
                <p class="pb-1 pb-lg-0 mb-4 mb-lg-5 white-70">
                  {step.text}
                  {idx < steps.length - 1 && "."}
                </p>
              </div>
            </div>
          </div>

          {idx < steps.length - 1 && (
            <div
              class="d-none d-lg-flex justify-content-center"
              data-aos="fade-in"
              data-aos-duration="500"
              data-aos-offset="250"
            >
              <svg
                class="d-block text-primary"
                width={arrows[idx % 2].id === "arrow1" ? "339" : "263"}
                height={arrows[idx % 2].id === "arrow1" ? "365" : "275"}
                viewBox={arrows[idx % 2].viewBox}
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={arrows[idx % 2].style}
              >
                {idx % 2 === 0 ? (
                  <>
                    <path
                      d="M324 291.371C120.111 291.37 240.756 58.7225 1.00032 73.2606"
                      stroke="url(#arrow1)"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-dasharray="6 6"
                    ></path>
                    <path
                      d="M337.375 290.62C338.074 290.998 338.074 292.001 337.375 292.379L328.476 297.196C327.81 297.557 327 297.074 327 296.317L327 286.683C327 285.925 327.81 285.443 328.476 285.803L337.375 290.62Z"
                      fill="currentColor"
                    ></path>
                    <defs>
                      <linearGradient
                        id="arrow1"
                        x1="324"
                        y1="291.5"
                        x2="-2.99974"
                        y2="72.4997"
                        gradientUnits="userSpaceOnUse"
                      >
                        <stop offset="0" stop-color="currentColor"></stop>
                        <stop offset="1" stop-color="currentColor" stop-opacity="0"></stop>
                      </linearGradient>
                    </defs>
                  </>
                ) : (
                  <>
                    <path
                      d="M8.13678 249.647C7.47108 250.081 6.59001 249.602 6.59106 248.808L6.60444 238.689C6.60544 237.931 7.4158 237.45 8.08162 237.811L16.5478 242.408C17.2136 242.77 17.2512 243.712 16.6163 244.125L8.13678 249.647Z"
                      fill="currentColor"
                    ></path>
                    <path
                      d="M261.961 37.8891C216.908 65.6243 128.226 135.486 133.916 193.05C141.029 265.005 265.134 173.468 173.666 148.634C89.2542 125.715 30.9125 210.547 13.9796 236.702"
                      stroke="url(#arrow2)"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-dasharray="6 6"
                    ></path>
                    <defs>
                      <linearGradient
                        id="arrow2"
                        x1="13.9797"
                        y1="234.5"
                        x2="276.704"
                        y2="60.1939"
                        gradientUnits="userSpaceOnUse"
                      >
                        <stop offset="0" stop-color="currentColor"></stop>
                        <stop offset="1" stop-color="currentColor" stop-opacity="0"></stop>
                      </linearGradient>
                    </defs>
                  </>
                )}
              </svg>
            </div>
          )}
        </>
      ))
    }
  </div>
</section>